# Cursor Rules: Preventing Minecraft Dirt Texture in Custom UI Widgets

## Problem
When extending Minecraft's `AlwaysSelectedEntryListWidget` or `Screen` classes, the default rendering methods draw a dirt block texture as the background. This creates an unwanted visual appearance that doesn't match custom UI designs.

## Solution: Manual Rendering Without super.render()

### For List Widgets (AlwaysSelectedEntryListWidget)

**DO NOT call `super.render()`** - Instead, render everything manually:

```java
@Override
public void render(DrawContext context, int mouseX, int mouseY, float delta) {
    if (!visible) {
        return; // Skip rendering when not visible
    }
    
    int x = this.getRowLeft();
    int y = this.top;
    int width = this.width;
    int height = this.bottom - this.top;
    
    // Draw FULLY OPAQUE dark background - completely cover any default rendering
    // Use a larger area to ensure complete coverage
    context.fill(x - 10, y - 10, x + width + 10, y + height + 10, 0xFF000000); // Black first
    context.fill(x - 5, y - 5, x + width + 5, y + height + 5, 0xFF101010); // Then dark gray
    
    // Draw border matching main window style
    context.drawBorder(x - 5, y - 5, width + 10, height + 10, 0xFF404040);
    
    // Render entries manually WITHOUT calling super.render() to avoid parent's background
    int scrollAmount = (int)this.getScrollAmount();
    int startIndex = Math.max(0, scrollAmount / this.itemHeight);
    int endIndex = Math.min(this.children().size(), startIndex + (height / this.itemHeight) + 2);
    
    for (int i = startIndex; i < endIndex && i < this.children().size(); i++) {
        Entry entry = this.children().get(i);
        int entryY = y + (i * this.itemHeight) - scrollAmount;
        
        if (entryY + this.itemHeight >= y && entryY <= y + height) {
            boolean isSelected = this.getSelectedOrNull() == entry;
            boolean isHovered = mouseX >= x && mouseX <= x + width && 
                               mouseY >= entryY && mouseY <= entryY + this.itemHeight;
            entry.render(context, i, entryY, x, width, this.itemHeight, mouseX, mouseY, isSelected || isHovered, delta);
        }
    }
    
    // Render scrollbar if needed
    int maxScroll = this.getMaxScroll();
    if (maxScroll > 0) {
        int scrollbarX = x + width - 6;
        int scrollbarHeight = Math.max(4, (int)((height / (float)(maxScroll + height)) * height));
        int scrollbarY = y + (int)((scrollAmount / (float)maxScroll) * (height - scrollbarHeight));
        context.fill(scrollbarX, scrollbarY, scrollbarX + 4, scrollbarY + scrollbarHeight, 0x80FFFFFF);
    }
}

@Override
protected void renderBackground(DrawContext context) {
    // Override to completely prevent default background rendering (which includes dirt texture)
    // Do NOT call super.renderBackground() - this prevents the dirt texture from showing
    // We draw our own background in render() method instead
}
```

### For Screen Classes

**DO NOT call `this.renderBackground(context)`** - Override it instead:

```java
@Override
public void render(DrawContext context, int mouseX, int mouseY, float delta) {
    // Don't call renderBackground() - we'll draw our own custom background
    // This prevents the default Minecraft dirt texture background from showing
    
    // Draw your own custom background
    context.fill(x, y, x + screenWidth, y + screenHeight, 0xC0101010);
    context.drawBorder(x, y, screenWidth, screenHeight, 0xFF404040);
    
    // ... rest of rendering
}

@Override
public void renderBackground(DrawContext context) {
    // Override to prevent default Minecraft background (dirt texture) from rendering
    // We draw our own custom background in render() method instead
    // Do NOT call super.renderBackground() - this prevents the dirt texture from showing
}
```

## Key Principles

1. **Never call `super.render()`** in list widgets - it will render the dirt texture
2. **Always override `renderBackground()`** and leave it empty (don't call super)
3. **Use fully opaque backgrounds** (`0xFF` alpha) to ensure complete coverage
4. **Draw background layers** - black first, then your custom color for complete coverage
5. **Render entries manually** - iterate through visible entries and render them yourself
6. **Render scrollbar manually** - calculate and draw the scrollbar yourself

## Why This Works

The parent classes (`AlwaysSelectedEntryListWidget`, `Screen`) have default rendering methods that draw the dirt texture. By completely avoiding `super.render()` and `super.renderBackground()`, we prevent these default methods from executing. Instead, we render everything manually with our custom styling.

## Testing

After implementing this fix:
1. Run `./gradlew clean build` to ensure a fresh build
2. Test the UI in-game to verify no dirt textures appear
3. Check all tabs and widget states to ensure backgrounds are consistent
4. Verify scrolling and interaction still work correctly

